//////////////////////////////////////////////////////////////////////////////////
///             @file   PMXConfig.hpp
///             @brief  PMXFile Config
///             @author Toide Yutaro
///             @date   2021_02_22
//////////////////////////////////////////////////////////////////////////////////
#pragma once
#ifndef PMD_MODEL_HPP
#define PMD_MODEL_HPP

//////////////////////////////////////////////////////////////////////////////////
//                             Include
//////////////////////////////////////////////////////////////////////////////////
#include "GameCore/Include/Model/Model.hpp"
#include "GameCore/Include/Model/MMD/PMDFile.hpp"
#include <DirectXMath.h>
#include <Windows.h>
#include <vector>
#include <memory>
#include <string>

//////////////////////////////////////////////////////////////////////////////////
//                              Define
//////////////////////////////////////////////////////////////////////////////////
using VertexBuffer = std::shared_ptr<UploadBuffer<PMDVertex>>;
class PMDModel : public DefaultModel
{
public:
	/****************************************************************************
	**                Public Function
	*****************************************************************************/
	bool Initialize(const std::wstring& filePath);

	/****************************************************************************
	**                Public Member Variables
	*****************************************************************************/

	/****************************************************************************
	**                Constructor and Destructor
	*****************************************************************************/
protected:
	/****************************************************************************
	**                ProtectedFunction
	*****************************************************************************/
	bool PrepareVertexBuffer();
	bool PrepareIndexBuffer();
	

	/****************************************************************************
	**                Protected Member Variables
	*****************************************************************************/
private:
	/****************************************************************************
	**                PrivateFunction
	*****************************************************************************/
	std::shared_ptr<PMDData> _pmdData = nullptr;
	VertexBuffer _vertexBuffer[FRAME_BUFFER_COUNT];
	
	/****************************************************************************
	**                Protected Member Variables
	*****************************************************************************/

};

#endif